<UserControl
    x:Class="EasyExtract.UserControls.History"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
    d:DesignHeight="800"
    d:DesignWidth="1500"
    ui:Design.Background="{DynamicResource ApplicationBackgroundBrush}"
    Foreground="{DynamicResource TextFillColorPrimaryBrush}"
    Loaded="History_OnLoaded"
    mc:Ignorable="d">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="2*" />
            <RowDefinition Height="1*" />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="1*" />
            <ColumnDefinition Width="1*" />
        </Grid.ColumnDefinitions>
        <ui:CardExpander
            x:Name="FilesExtractedCardExpander"
            Grid.Row="0"
            Grid.Column="0"
            Margin="15"
            Content="{Binding TotalFilesExtracted}"
            CornerRadius="15"
            Header="Total Files Extracted"
            Icon="{ui:SymbolIcon Document24}"
            IsEnabled="False"
            IsExpanded="True" />
        <ui:CardExpander
            x:Name="UnityPackagesExtractedCardExpander"
            Grid.Row="0"
            Grid.Column="1"
            Margin="15"
            Content="{Binding TotalExtracted}"
            CornerRadius="15"
            Header="Total Unitypackages Extracted"
            Icon="{ui:SymbolIcon DocumentHeartPulse24}"
            IsEnabled="False"
            IsExpanded="True" />

        <StackPanel
            Grid.Row="2"
            Grid.Column="0"
            Grid.ColumnSpan="2"
            HorizontalAlignment="Center"
            VerticalAlignment="Bottom">
            <ui:Button
                x:Name="ClearHistoryButton"
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                Click="ClearHistoryButton_OnClick"
                Content="Clear History"
                Icon="{ui:SymbolIcon Subtract24}" />
            <Label
                x:Name="NoHistoryLabel"
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                Content="No History Found"
                Visibility="Visible" />
        </StackPanel>

        <ui:ListView
            Grid.Row="1"
            Grid.Column="0"
            Grid.ColumnSpan="2"
            Margin="15"
            HorizontalAlignment="Stretch"
            HorizontalContentAlignment="Stretch"
            ItemsSource="{Binding HistoryList}">
            <ui:ListView.ItemTemplate>
                <DataTemplate>
                    <ui:CardControl>
                        <ui:CardControl.Icon>
                            <ui:SymbolIcon
                                Margin="0,0,5,0"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                Symbol="FolderZip24" />
                        </ui:CardControl.Icon>
                        <ui:CardControl.Header>
                            <StackPanel>
                                <StackPanel>
                                    <ui:TextBlock
                                        FontTypography="BodyStrong"
                                        Text="{Binding FileName}"
                                        TextWrapping="WrapWithOverflow" />
                                    <ui:TextBlock
                                        Appearance="Secondary"
                                        Opacity="0.5"
                                        Text="{Binding ExtractedPath}"
                                        TextWrapping="WrapWithOverflow" />
                                </StackPanel>
                                <StackPanel HorizontalAlignment="Center" Orientation="Vertical">
                                    <ui:TextBlock
                                        FontTypography="BodyStrong"
                                        Opacity="0.2"
                                        Text="{Binding ExtractedDate}"
                                        TextWrapping="WrapWithOverflow" />
                                </StackPanel>
                            </StackPanel>
                        </ui:CardControl.Header>
                        <ui:Card>
                            <StackPanel Orientation="Horizontal">
                                <ui:Button
                                    x:Name="OpenFolderButton"
                                    Margin="5"
                                    Click="OpenFolderButton_OnClick"
                                    Icon="{ui:SymbolIcon OpenFolder24}"
                                    ToolTip="Open Folder" />
                                <ui:Button
                                    x:Name="DeleteBtn"
                                    Margin="5"
                                    Click="DeleteBtn_OnClick"
                                    Icon="{ui:SymbolIcon Delete24}"
                                    ToolTip="Delete" />
                            </StackPanel>
                        </ui:Card>
                    </ui:CardControl>
                </DataTemplate>
            </ui:ListView.ItemTemplate>
        </ui:ListView>

    </Grid>
</UserControl>